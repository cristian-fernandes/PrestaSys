…
MC:\projects\personal\prestasys\Unisul.PrestaSys.Repositorio\ContextFactory.cs
	namespace 	
Unisul
 
. 
	PrestaSys 
. 
Repositorio &
{ 
public 

class 
ContextFactory 
:  !'
IDesignTimeDbContextFactory" =
<= >
PrestaSysDbContext> P
>P Q
{		 
public

 
PrestaSysDbContext

 !
CreateDbContext

" 1
(

1 2
)

2 3
{ 	
return 
CreateDbContext "
(" #
null# '
)' (
;( )
} 	
public 
PrestaSysDbContext !
CreateDbContext" 1
(1 2
string2 8
[8 9
]9 :
args; ?
)? @
{ 	
var  
builderConfiguration $
=% &
new' * 
ConfigurationBuilder+ ?
(? @
)@ A
. 
SetBasePath 
( 
	Directory &
.& '
GetCurrentDirectory' :
(: ;
); <
+= >
$str? Y
)Y Z
. 
AddJsonFile 
( 
$str ;
); <
;< =
var 
configuration 
=  
builderConfiguration  4
.4 5
Build5 :
(: ;
); <
;< =
var 
connectionString  
=! "
configuration# 0
.0 1
GetConnectionString1 D
(D E
$strE R
)R S
;S T
var 
builder 
= 
new #
DbContextOptionsBuilder 5
<5 6
PrestaSysDbContext6 H
>H I
(I J
)J K
;K L
builder 
. 
UseSqlServer  
(  !
connectionString! 1
)1 2
;2 3
return 
new 
PrestaSysDbContext )
() *
builder* 1
.1 2
Options2 9
)9 :
;: ;
} 	
} 
} ¸
RC:\projects\personal\prestasys\Unisul.PrestaSys.Repositorio\IPrestaSysDbContext.cs
	namespace 	
Unisul
 
. 
	PrestaSys 
. 
Repositorio &
{ 
public 

	interface 
IPrestaSysDbContext (
:) *
IDisposable+ 6
{ 
DbSet 
< 
	Prestacao 
> 
	Prestacao "
{# $
get% (
;( )
set* -
;- .
}/ 0
DbSet 
< 
PrestacaoStatus 
> 
PrestacaoStatus .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
DbSet 
< 
PrestacaoTipo 
> 
PrestacaoTipo *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
DbSet 
< 
Usuario 
> 
Usuario 
{  
get! $
;$ %
set& )
;) *
}+ ,
EntityEntry 
Add 
( 
object 
entity %
)% &
;& '
bool 
Equals 
( 
object 
obj 
) 
;  
int 
GetHashCode 
( 
) 
; 
EntityEntry 
Remove 
< 
TEntity "
>" #
(# $
TEntity$ +
entity, 2
)2 3
where4 9
TEntity: A
:B C
classD I
;I J
int 
SaveChanges 
( 
) 
; 
int 
SaveChanges 
( 
bool %
acceptAllChangesOnSuccess 6
)6 7
;7 8
Task 
< 
int 
> 
SaveChangesAsync "
(" #
CancellationToken# 4
cancellationToken5 F
)F G
;G H
Task 
< 
int 
> 
SaveChangesAsync "
(" #
bool# '%
acceptAllChangesOnSuccess( A
,A B
CancellationTokenC T
cancellationTokenU f
)f g
;g h
Task 
< 
int 
> 
SaveChangesAsync "
(" #
)# $
;$ %
string 
ToString 
( 
) 
; 
EntityEntry 
Update 
( 
object !
entity" (
)( )
;) *
void 

BulkUpdate 
< 
T 
> 
( 
IList  
<  !
T! "
>" #
entities$ ,
,, -

BulkConfig. 8

bulkConfig9 C
=D E
nullF J
,J K
ActionL R
<R S
decimalS Z
>Z [
progress\ d
=e f
nullg k
)k l
wherem r
Ts t
:u v
classw |
;| }
} 
}   Ö•
qC:\projects\personal\prestasys\Unisul.PrestaSys.Repositorio\Migrations\20190225154826_PrestacaoDB_InitialSetup.cs
	namespace 	
Unisul
 
. 
	PrestaSys 
. 
Repositorio &
.& '

Migrations' 1
{ 
public 

partial 
class $
PrestacaoDB_InitialSetup 1
:2 3
	Migration4 =
{ 
	protected		 
override		 
void		 
Up		  "
(		" #
MigrationBuilder		# 3
migrationBuilder		4 D
)		D E
{

 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str '
,' (
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
nullable+ 3
:3 4
false5 :
): ;
. 

Annotation #
(# $
$str$ G
,G H,
 SqlServerValueGenerationStrategyI i
.i j
IdentityColumnj x
)x y
,y z
Status 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
	maxLength2 ;
:; <
$num= ?
,? @
nullableA I
:I J
falseK P
)P Q
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 9
,9 :
x; <
=>= ?
x@ A
.A B
IdB D
)D E
;E F
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str %
,% &
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
nullable+ 3
:3 4
false5 :
): ;
. 

Annotation #
(# $
$str$ G
,G H,
 SqlServerValueGenerationStrategyI i
.i j
IdentityColumnj x
)x y
,y z
Tipo 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
	maxLength0 9
:9 :
$num; =
,= >
nullable? G
:G H
falseI N
)N O
} 
, 
constraints   
:   
table   "
=>  # %
{!! 
table"" 
."" 

PrimaryKey"" $
(""$ %
$str""% 7
,""7 8
x""9 :
=>""; =
x""> ?
.""? @
Id""@ B
)""B C
;""C D
}## 
)## 
;## 
migrationBuilder%% 
.%% 
CreateTable%% (
(%%( )
name&& 
:&& 
$str&& 
,&&  
columns'' 
:'' 
table'' 
=>'' !
new''" %
{(( 
Id)) 
=)) 
table)) 
.)) 
Column)) %
<))% &
int))& )
>))) *
())* +
nullable))+ 3
:))3 4
false))5 :
))): ;
.** 

Annotation** #
(**# $
$str**$ G
,**G H,
 SqlServerValueGenerationStrategy**I i
.**i j
IdentityColumn**j x
)**x y
,**y z
Email++ 
=++ 
table++ !
.++! "
Column++" (
<++( )
string++) /
>++/ 0
(++0 1
	maxLength++1 :
:++: ;
$num++< >
,++> ?
nullable++@ H
:++H I
false++J O
)++O P
,++P Q
FlagGerente,, 
=,,  !
table,," '
.,,' (
Column,,( .
<,,. /
bool,,/ 3
>,,3 4
(,,4 5
nullable,,5 =
:,,= >
false,,? D
),,D E
,,,E F!
FlagGerenteFinanceiro-- )
=--* +
table--, 1
.--1 2
Column--2 8
<--8 9
bool--9 =
>--= >
(--> ?
nullable--? G
:--G H
false--I N
)--N O
,--O P
GerenteFinanceiroId.. '
=..( )
table..* /
.../ 0
Column..0 6
<..6 7
int..7 :
>..: ;
(..; <
nullable..< D
:..D E
true..F J
)..J K
,..K L
	GerenteId// 
=// 
table//  %
.//% &
Column//& ,
<//, -
int//- 0
>//0 1
(//1 2
nullable//2 :
://: ;
true//< @
)//@ A
,//A B
Nome00 
=00 
table00  
.00  !
Column00! '
<00' (
string00( .
>00. /
(00/ 0
	maxLength000 9
:009 :
$num00; =
,00= >
nullable00? G
:00G H
false00I N
)00N O
,00O P
Senha11 
=11 
table11 !
.11! "
Column11" (
<11( )
string11) /
>11/ 0
(110 1
	maxLength111 :
:11: ;
$num11< >
,11> ?
nullable11@ H
:11H I
false11J O
)11O P
,11P Q
	Sobrenome22 
=22 
table22  %
.22% &
Column22& ,
<22, -
string22- 3
>223 4
(224 5
	maxLength225 >
:22> ?
$num22@ B
,22B C
nullable22D L
:22L M
false22N S
)22S T
}33 
,33 
constraints44 
:44 
table44 "
=>44# %
{55 
table66 
.66 

PrimaryKey66 $
(66$ %
$str66% 1
,661 2
x663 4
=>665 7
x668 9
.669 :
Id66: <
)66< =
;66= >
table77 
.77 

ForeignKey77 $
(77$ %
name88 
:88 
$str88 A
,88A B
column99 
:99 
x99  !
=>99" $
x99% &
.99& '
GerenteFinanceiroId99' :
,99: ;
principalTable:: &
:::& '
$str::( 1
,::1 2
principalColumn;; '
:;;' (
$str;;) -
,;;- .
onDelete<<  
:<<  !
ReferentialAction<<" 3
.<<3 4
Restrict<<4 <
)<<< =
;<<= >
table== 
.== 

ForeignKey== $
(==$ %
name>> 
:>> 
$str>> 7
,>>7 8
column?? 
:?? 
x??  !
=>??" $
x??% &
.??& '
	GerenteId??' 0
,??0 1
principalTable@@ &
:@@& '
$str@@( 1
,@@1 2
principalColumnAA '
:AA' (
$strAA) -
,AA- .
onDeleteBB  
:BB  !
ReferentialActionBB" 3
.BB3 4
RestrictBB4 <
)BB< =
;BB= >
}CC 
)CC 
;CC 
migrationBuilderEE 
.EE 
CreateTableEE (
(EE( )
nameFF 
:FF 
$strFF !
,FF! "
columnsGG 
:GG 
tableGG 
=>GG !
newGG" %
{HH 
IdII 
=II 
tableII 
.II 
ColumnII %
<II% &
intII& )
>II) *
(II* +
nullableII+ 3
:II3 4
falseII5 :
)II: ;
.JJ 

AnnotationJJ #
(JJ# $
$strJJ$ G
,JJG H,
 SqlServerValueGenerationStrategyJJI i
.JJi j
IdentityColumnJJj x
)JJx y
,JJy z!
AprovadorFinanceiroIdKK )
=KK* +
tableKK, 1
.KK1 2
ColumnKK2 8
<KK8 9
intKK9 <
>KK< =
(KK= >
nullableKK> F
:KKF G
falseKKH M
)KKM N
,KKN O
AprovadorIdLL 
=LL  !
tableLL" '
.LL' (
ColumnLL( .
<LL. /
intLL/ 2
>LL2 3
(LL3 4
nullableLL4 <
:LL< =
falseLL> C
)LLC D
,LLD E
DataMM 
=MM 
tableMM  
.MM  !
ColumnMM! '
<MM' (
DateTimeMM( 0
>MM0 1
(MM1 2
typeMM2 6
:MM6 7
$strMM8 B
,MMB C
nullableMMD L
:MML M
falseMMN S
)MMS T
,MMT U

EmitenteIdNN 
=NN  
tableNN! &
.NN& '
ColumnNN' -
<NN- .
intNN. 1
>NN1 2
(NN2 3
nullableNN3 ;
:NN; <
falseNN= B
)NNB C
,NNC D
ImagemComprovanteOO %
=OO& '
tableOO( -
.OO- .
ColumnOO. 4
<OO4 5
byteOO5 9
[OO9 :
]OO: ;
>OO; <
(OO< =
nullableOO= E
:OOE F
trueOOG K
)OOK L
,OOL M
JustificativaPP !
=PP" #
tablePP$ )
.PP) *
ColumnPP* 0
<PP0 1
stringPP1 7
>PP7 8
(PP8 9
nullablePP9 A
:PPA B
falsePPC H
)PPH I
,PPI J
StatusIdQQ 
=QQ 
tableQQ $
.QQ$ %
ColumnQQ% +
<QQ+ ,
intQQ, /
>QQ/ 0
(QQ0 1
nullableQQ1 9
:QQ9 :
falseQQ; @
)QQ@ A
,QQA B
TipoIdRR 
=RR 
tableRR "
.RR" #
ColumnRR# )
<RR) *
intRR* -
>RR- .
(RR. /
nullableRR/ 7
:RR7 8
falseRR9 >
)RR> ?
,RR? @
TituloSS 
=SS 
tableSS "
.SS" #
ColumnSS# )
<SS) *
stringSS* 0
>SS0 1
(SS1 2
	maxLengthSS2 ;
:SS; <
$numSS= ?
,SS? @
nullableSSA I
:SSI J
falseSSK P
)SSP Q
,SSQ R
ValorTT 
=TT 
tableTT !
.TT! "
ColumnTT" (
<TT( )
decimalTT) 0
>TT0 1
(TT1 2
typeTT2 6
:TT6 7
$strTT8 H
,TTH I
nullableTTJ R
:TTR S
falseTTT Y
)TTY Z
}UU 
,UU 
constraintsVV 
:VV 
tableVV "
=>VV# %
{WW 
tableXX 
.XX 

PrimaryKeyXX $
(XX$ %
$strXX% 3
,XX3 4
xXX5 6
=>XX7 9
xXX: ;
.XX; <
IdXX< >
)XX> ?
;XX? @
tableYY 
.YY 

ForeignKeyYY $
(YY$ %
nameZZ 
:ZZ 
$strZZ I
,ZZI J
column[[ 
:[[ 
x[[  !
=>[[" $
x[[% &
.[[& '!
AprovadorFinanceiroId[[' <
,[[< =
principalTable\\ &
:\\& '
$str\\( 1
,\\1 2
principalColumn]] '
:]]' (
$str]]) -
,]]- .
onDelete^^  
:^^  !
ReferentialAction^^" 3
.^^3 4
Restrict^^4 <
)^^< =
;^^= >
table__ 
.__ 

ForeignKey__ $
(__$ %
name`` 
:`` 
$str`` ?
,``? @
columnaa 
:aa 
xaa  !
=>aa" $
xaa% &
.aa& '
AprovadorIdaa' 2
,aa2 3
principalTablebb &
:bb& '
$strbb( 1
,bb1 2
principalColumncc '
:cc' (
$strcc) -
,cc- .
onDeletedd  
:dd  !
ReferentialActiondd" 3
.dd3 4
Restrictdd4 <
)dd< =
;dd= >
tableee 
.ee 

ForeignKeyee $
(ee$ %
nameff 
:ff 
$strff >
,ff> ?
columngg 
:gg 
xgg  !
=>gg" $
xgg% &
.gg& '

EmitenteIdgg' 1
,gg1 2
principalTablehh &
:hh& '
$strhh( 1
,hh1 2
principalColumnii '
:ii' (
$strii) -
,ii- .
onDeletejj  
:jj  !
ReferentialActionjj" 3
.jj3 4
Restrictjj4 <
)jj< =
;jj= >
tablekk 
.kk 

ForeignKeykk $
(kk$ %
namell 
:ll 
$strll <
,ll< =
columnmm 
:mm 
xmm  !
=>mm" $
xmm% &
.mm& '
StatusIdmm' /
,mm/ 0
principalTablenn &
:nn& '
$strnn( 9
,nn9 :
principalColumnoo '
:oo' (
$stroo) -
,oo- .
onDeletepp  
:pp  !
ReferentialActionpp" 3
.pp3 4
Restrictpp4 <
)pp< =
;pp= >
tableqq 
.qq 

ForeignKeyqq $
(qq$ %
namerr 
:rr 
$strrr :
,rr: ;
columnss 
:ss 
xss  !
=>ss" $
xss% &
.ss& '
TipoIdss' -
,ss- .
principalTablett &
:tt& '
$strtt( 7
,tt7 8
principalColumnuu '
:uu' (
$struu) -
,uu- .
onDeletevv  
:vv  !
ReferentialActionvv" 3
.vv3 4
Restrictvv4 <
)vv< =
;vv= >
}ww 
)ww 
;ww 
migrationBuilderyy 
.yy 

InsertDatayy '
(yy' (
tablezz 
:zz 
$strzz (
,zz( )
columns{{ 
:{{ 
new{{ 
[{{ 
]{{ 
{{{  
$str{{! %
,{{% &
$str{{' /
}{{0 1
,{{1 2
values|| 
:|| 
new|| 
object|| "
[||" #
,||# $
]||$ %
{}} 
{~~ 
$num~~ 
,~~ 
$str~~ #
}~~$ %
,~~% &
{ 
$num 
, 
$str 3
}4 5
,5 6
{
ÄÄ 
$num
ÄÄ 
,
ÄÄ 
$str
ÄÄ 2
}
ÄÄ3 4
,
ÄÄ4 5
{
ÅÅ 
$num
ÅÅ 
,
ÅÅ 
$str
ÅÅ %
}
ÅÅ& '
,
ÅÅ' (
{
ÇÇ 
$num
ÇÇ 
,
ÇÇ 
$str
ÇÇ $
}
ÇÇ% &
}
ÉÉ 
)
ÉÉ 
;
ÉÉ 
migrationBuilder
ÖÖ 
.
ÖÖ 

InsertData
ÖÖ '
(
ÖÖ' (
table
ÜÜ 
:
ÜÜ 
$str
ÜÜ &
,
ÜÜ& '
columns
áá 
:
áá 
new
áá 
[
áá 
]
áá 
{
áá  
$str
áá! %
,
áá% &
$str
áá' -
}
áá. /
,
áá/ 0
values
àà 
:
àà 
new
àà 
object
àà "
[
àà" #
,
àà# $
]
àà$ %
{
ââ 
{
ää 
$num
ää 
,
ää 
$str
ää !
}
ää" #
,
ää# $
{
ãã 
$num
ãã 
,
ãã 
$str
ãã *
}
ãã+ ,
,
ãã, -
{
åå 
$num
åå 
,
åå 
$str
åå &
}
åå' (
,
åå( )
{
çç 
$num
çç 
,
çç 
$str
çç $
}
çç% &
}
éé 
)
éé 
;
éé 
migrationBuilder
êê 
.
êê 

InsertData
êê '
(
êê' (
table
ëë 
:
ëë 
$str
ëë  
,
ëë  !
columns
íí 
:
íí 
new
íí 
[
íí 
]
íí 
{
íí  
$str
íí! %
,
íí% &
$str
íí' .
,
íí. /
$str
íí0 =
,
íí= >
$str
íí? V
,
ííV W
$str
ííX m
,
íím n
$str
íío z
,
ííz {
$stríí| Ç
,ííÇ É
$strííÑ ã
,ííã å
$strííç ò
}ííô ö
,ííö õ
values
ìì 
:
ìì 
new
ìì 
object
ìì "
[
ìì" #
]
ìì# $
{
ìì% &
$num
ìì' (
,
ìì( )
$str
ìì* H
,
ììH I
true
ììJ N
,
ììN O
true
ììP T
,
ììT U
$num
ììV W
,
ììW X
$num
ììY Z
,
ììZ [
$str
ìì\ f
,
ììf g
$str
ììh n
,
ììn o
$str
ììp {
}
ìì| }
)
ìì} ~
;
ìì~ 
migrationBuilder
ïï 
.
ïï 
CreateIndex
ïï (
(
ïï( )
name
ññ 
:
ññ 
$str
ññ :
,
ññ: ;
table
óó 
:
óó 
$str
óó "
,
óó" #
column
òò 
:
òò 
$str
òò /
)
òò/ 0
;
òò0 1
migrationBuilder
öö 
.
öö 
CreateIndex
öö (
(
öö( )
name
õõ 
:
õõ 
$str
õõ 0
,
õõ0 1
table
úú 
:
úú 
$str
úú "
,
úú" #
column
ùù 
:
ùù 
$str
ùù %
)
ùù% &
;
ùù& '
migrationBuilder
üü 
.
üü 
CreateIndex
üü (
(
üü( )
name
†† 
:
†† 
$str
†† /
,
††/ 0
table
°° 
:
°° 
$str
°° "
,
°°" #
column
¢¢ 
:
¢¢ 
$str
¢¢ $
)
¢¢$ %
;
¢¢% &
migrationBuilder
§§ 
.
§§ 
CreateIndex
§§ (
(
§§( )
name
•• 
:
•• 
$str
•• -
,
••- .
table
¶¶ 
:
¶¶ 
$str
¶¶ "
,
¶¶" #
column
ßß 
:
ßß 
$str
ßß "
)
ßß" #
;
ßß# $
migrationBuilder
©© 
.
©© 
CreateIndex
©© (
(
©©( )
name
™™ 
:
™™ 
$str
™™ +
,
™™+ ,
table
´´ 
:
´´ 
$str
´´ "
,
´´" #
column
¨¨ 
:
¨¨ 
$str
¨¨  
)
¨¨  !
;
¨¨! "
migrationBuilder
ÆÆ 
.
ÆÆ 
CreateIndex
ÆÆ (
(
ÆÆ( )
name
ØØ 
:
ØØ 
$str
ØØ &
,
ØØ& '
table
∞∞ 
:
∞∞ 
$str
∞∞  
,
∞∞  !
column
±± 
:
±± 
$str
±± 
,
±±  
unique
≤≤ 
:
≤≤ 
true
≤≤ 
)
≤≤ 
;
≤≤ 
migrationBuilder
¥¥ 
.
¥¥ 
CreateIndex
¥¥ (
(
¥¥( )
name
µµ 
:
µµ 
$str
µµ 6
,
µµ6 7
table
∂∂ 
:
∂∂ 
$str
∂∂  
,
∂∂  !
column
∑∑ 
:
∑∑ 
$str
∑∑ -
)
∑∑- .
;
∑∑. /
migrationBuilder
ππ 
.
ππ 
CreateIndex
ππ (
(
ππ( )
name
∫∫ 
:
∫∫ 
$str
∫∫ ,
,
∫∫, -
table
ªª 
:
ªª 
$str
ªª  
,
ªª  !
column
ºº 
:
ºº 
$str
ºº #
)
ºº# $
;
ºº$ %
}
ΩΩ 	
	protected
øø 
override
øø 
void
øø 
Down
øø  $
(
øø$ %
MigrationBuilder
øø% 5
migrationBuilder
øø6 F
)
øøF G
{
¿¿ 	
migrationBuilder
¡¡ 
.
¡¡ 
	DropTable
¡¡ &
(
¡¡& '
name
¬¬ 
:
¬¬ 
$str
¬¬ !
)
¬¬! "
;
¬¬" #
migrationBuilder
ƒƒ 
.
ƒƒ 
	DropTable
ƒƒ &
(
ƒƒ& '
name
≈≈ 
:
≈≈ 
$str
≈≈ 
)
≈≈  
;
≈≈  !
migrationBuilder
«« 
.
«« 
	DropTable
«« &
(
««& '
name
»» 
:
»» 
$str
»» '
)
»»' (
;
»»( )
migrationBuilder
   
.
   
	DropTable
   &
(
  & '
name
ÀÀ 
:
ÀÀ 
$str
ÀÀ %
)
ÀÀ% &
;
ÀÀ& '
}
ÃÃ 	
}
ÕÕ 
}ŒŒ ï)
zC:\projects\personal\prestasys\Unisul.PrestaSys.Repositorio\Migrations\20190225170043_PrestacaoDB_FixForPrestacaoStatus.cs
	namespace 	
Unisul
 
. 
	PrestaSys 
. 
Repositorio &
.& '

Migrations' 1
{ 
public 

partial 
class -
!PrestacaoDB_FixForPrestacaoStatus :
:; <
	Migration= F
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 

DeleteData		 '
(		' (
table

 
:

 
$str

 (
,

( )
	keyColumn 
: 
$str 
,  
keyValue 
: 
$num 
) 
; 
migrationBuilder 
. 

UpdateData '
(' (
table 
: 
$str (
,( )
	keyColumn 
: 
$str 
,  
keyValue 
: 
$num 
, 
column 
: 
$str  
,  !
value 
: 
$str 1
)1 2
;2 3
migrationBuilder 
. 

UpdateData '
(' (
table 
: 
$str (
,( )
	keyColumn 
: 
$str 
,  
keyValue 
: 
$num 
, 
column 
: 
$str  
,  !
value 
: 
$str 0
)0 1
;1 2
migrationBuilder 
. 

UpdateData '
(' (
table 
: 
$str (
,( )
	keyColumn 
: 
$str 
,  
keyValue 
: 
$num 
, 
column   
:   
$str    
,    !
value!! 
:!! 
$str!! #
)!!# $
;!!$ %
migrationBuilder## 
.## 

UpdateData## '
(##' (
table$$ 
:$$ 
$str$$ (
,$$( )
	keyColumn%% 
:%% 
$str%% 
,%%  
keyValue&& 
:&& 
$num&& 
,&& 
column'' 
:'' 
$str''  
,''  !
value(( 
:(( 
$str(( "
)((" #
;((# $
})) 	
	protected++ 
override++ 
void++ 
Down++  $
(++$ %
MigrationBuilder++% 5
migrationBuilder++6 F
)++F G
{,, 	
migrationBuilder-- 
.-- 

UpdateData-- '
(--' (
table.. 
:.. 
$str.. (
,..( )
	keyColumn// 
:// 
$str// 
,//  
keyValue00 
:00 
$num00 
,00 
column11 
:11 
$str11  
,11  !
value22 
:22 
$str22 !
)22! "
;22" #
migrationBuilder44 
.44 

UpdateData44 '
(44' (
table55 
:55 
$str55 (
,55( )
	keyColumn66 
:66 
$str66 
,66  
keyValue77 
:77 
$num77 
,77 
column88 
:88 
$str88  
,88  !
value99 
:99 
$str99 1
)991 2
;992 3
migrationBuilder;; 
.;; 

UpdateData;; '
(;;' (
table<< 
:<< 
$str<< (
,<<( )
	keyColumn== 
:== 
$str== 
,==  
keyValue>> 
:>> 
$num>> 
,>> 
column?? 
:?? 
$str??  
,??  !
value@@ 
:@@ 
$str@@ 0
)@@0 1
;@@1 2
migrationBuilderBB 
.BB 

UpdateDataBB '
(BB' (
tableCC 
:CC 
$strCC (
,CC( )
	keyColumnDD 
:DD 
$strDD 
,DD  
keyValueEE 
:EE 
$numEE 
,EE 
columnFF 
:FF 
$strFF  
,FF  !
valueGG 
:GG 
$strGG #
)GG# $
;GG$ %
migrationBuilderII 
.II 

InsertDataII '
(II' (
tableJJ 
:JJ 
$strJJ (
,JJ( )
columnsKK 
:KK 
newKK 
[KK 
]KK 
{KK  
$strKK! %
,KK% &
$strKK' /
}KK0 1
,KK1 2
valuesLL 
:LL 
newLL 
objectLL "
[LL" #
]LL# $
{LL% &
$numLL' (
,LL( )
$strLL* 5
}LL6 7
)LL7 8
;LL8 9
}MM 	
}NN 
}OO ñ
ÑC:\projects\personal\prestasys\Unisul.PrestaSys.Repositorio\Migrations\20190225171031_PrestacaoDB_AddedJustificativaParaAprovacao.cs
	namespace 	
Unisul
 
. 
	PrestaSys 
. 
Repositorio &
.& '

Migrations' 1
{ 
public 

partial 
class 7
+PrestacaoDB_AddedJustificativaParaAprovacao D
:E F
	MigrationG P
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
	AddColumn		 &
<		& '
string		' -
>		- .
(		. /
name

 
:

 
$str

 .
,

. /
table 
: 
$str "
," #
nullable 
: 
true 
) 
;  
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str 8
,8 9
table 
: 
$str "
," #
nullable 
: 
true 
) 
;  
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str .
,. /
table 
: 
$str "
)" #
;# $
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str 8
,8 9
table 
: 
$str "
)" #
;# $
} 	
} 
} „9
{C:\projects\personal\prestasys\Unisul.PrestaSys.Repositorio\Migrations\20190307162718_FixedValorFieldAddingDecimalValues.cs
	namespace 	
Unisul
 
. 
	PrestaSys 
. 
Repositorio &
.& '

Migrations' 1
{ 
public 

partial 
class .
"FixedValorFieldAddingDecimalValues ;
:< =
	Migration> G
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
DropForeignKey		 +
(		+ ,
name

 
:

 
$str

 9
,

9 :
table 
: 
$str  
)  !
;! "
migrationBuilder 
. 
DropForeignKey +
(+ ,
name 
: 
$str /
,/ 0
table 
: 
$str  
)  !
;! "
migrationBuilder 
. 
AlterColumn (
<( )
int) ,
>, -
(- .
name 
: 
$str !
,! "
table 
: 
$str  
,  !
nullable 
: 
false 
,  

oldClrType 
: 
typeof "
(" #
int# &
)& '
,' (
oldNullable 
: 
true !
)! "
;" #
migrationBuilder 
. 
AlterColumn (
<( )
int) ,
>, -
(- .
name 
: 
$str +
,+ ,
table 
: 
$str  
,  !
nullable 
: 
false 
,  

oldClrType 
: 
typeof "
(" #
int# &
)& '
,' (
oldNullable 
: 
true !
)! "
;" #
migrationBuilder 
. 
AlterColumn (
<( )
decimal) 0
>0 1
(1 2
name   
:   
$str   
,   
table!! 
:!! 
$str!! "
,!!" #
type"" 
:"" 
$str"" &
,""& '
nullable## 
:## 
false## 
,##  

oldClrType$$ 
:$$ 
typeof$$ "
($$" #
decimal$$# *
)$$* +
,$$+ ,
oldType%% 
:%% 
$str%% )
)%%) *
;%%* +
migrationBuilder'' 
.'' 
AddForeignKey'' *
(''* +
name(( 
:(( 
$str(( 9
,((9 :
table)) 
:)) 
$str))  
,))  !
column** 
:** 
$str** -
,**- .
principalTable++ 
:++ 
$str++  )
,++) *
principalColumn,, 
:,,  
$str,,! %
,,,% &
onDelete-- 
:-- 
ReferentialAction-- +
.--+ ,
NoAction--, 4
)--4 5
;--5 6
migrationBuilder// 
.// 
AddForeignKey// *
(//* +
name00 
:00 
$str00 /
,00/ 0
table11 
:11 
$str11  
,11  !
column22 
:22 
$str22 #
,22# $
principalTable33 
:33 
$str33  )
,33) *
principalColumn44 
:44  
$str44! %
,44% &
onDelete55 
:55 
ReferentialAction55 +
.55+ ,
NoAction55, 4
)554 5
;555 6
}66 	
	protected88 
override88 
void88 
Down88  $
(88$ %
MigrationBuilder88% 5
migrationBuilder886 F
)88F G
{99 	
migrationBuilder:: 
.:: 
DropForeignKey:: +
(::+ ,
name;; 
:;; 
$str;; 9
,;;9 :
table<< 
:<< 
$str<<  
)<<  !
;<<! "
migrationBuilder>> 
.>> 
DropForeignKey>> +
(>>+ ,
name?? 
:?? 
$str?? /
,??/ 0
table@@ 
:@@ 
$str@@  
)@@  !
;@@! "
migrationBuilderBB 
.BB 
AlterColumnBB (
<BB( )
intBB) ,
>BB, -
(BB- .
nameCC 
:CC 
$strCC !
,CC! "
tableDD 
:DD 
$strDD  
,DD  !
nullableEE 
:EE 
trueEE 
,EE 

oldClrTypeFF 
:FF 
typeofFF "
(FF" #
intFF# &
)FF& '
)FF' (
;FF( )
migrationBuilderHH 
.HH 
AlterColumnHH (
<HH( )
intHH) ,
>HH, -
(HH- .
nameII 
:II 
$strII +
,II+ ,
tableJJ 
:JJ 
$strJJ  
,JJ  !
nullableKK 
:KK 
trueKK 
,KK 

oldClrTypeLL 
:LL 
typeofLL "
(LL" #
intLL# &
)LL& '
)LL' (
;LL( )
migrationBuilderNN 
.NN 
AlterColumnNN (
<NN( )
decimalNN) 0
>NN0 1
(NN1 2
nameOO 
:OO 
$strOO 
,OO 
tablePP 
:PP 
$strPP "
,PP" #
typeQQ 
:QQ 
$strQQ &
,QQ& '
nullableRR 
:RR 
falseRR 
,RR  

oldClrTypeSS 
:SS 
typeofSS "
(SS" #
decimalSS# *
)SS* +
,SS+ ,
oldTypeTT 
:TT 
$strTT )
)TT) *
;TT* +
migrationBuilderVV 
.VV 
AddForeignKeyVV *
(VV* +
nameWW 
:WW 
$strWW 9
,WW9 :
tableXX 
:XX 
$strXX  
,XX  !
columnYY 
:YY 
$strYY -
,YY- .
principalTableZZ 
:ZZ 
$strZZ  )
,ZZ) *
principalColumn[[ 
:[[  
$str[[! %
,[[% &
onDelete\\ 
:\\ 
ReferentialAction\\ +
.\\+ ,
NoAction\\, 4
)\\4 5
;\\5 6
migrationBuilder^^ 
.^^ 
AddForeignKey^^ *
(^^* +
name__ 
:__ 
$str__ /
,__/ 0
table`` 
:`` 
$str``  
,``  !
columnaa 
:aa 
$straa #
,aa# $
principalTablebb 
:bb 
$strbb  )
,bb) *
principalColumncc 
:cc  
$strcc! %
,cc% &
onDeletedd 
:dd 
ReferentialActiondd +
.dd+ ,
NoActiondd, 4
)dd4 5
;dd5 6
}ee 	
}ff 
}gg ¿
uC:\projects\personal\prestasys\Unisul.PrestaSys.Repositorio\Migrations\20190307214228_CascadeNoEmitenteDaPrestacao.cs
	namespace 	
Unisul
 
. 
	PrestaSys 
. 
Repositorio &
.& '

Migrations' 1
{ 
public 

partial 
class (
CascadeNoEmitenteDaPrestacao 5
:6 7
	Migration8 A
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
DropForeignKey		 +
(		+ ,
name

 
:

 
$str

 6
,

6 7
table 
: 
$str "
)" #
;# $
migrationBuilder 
. 
AddForeignKey *
(* +
name 
: 
$str 6
,6 7
table 
: 
$str "
," #
column 
: 
$str $
,$ %
principalTable 
: 
$str  )
,) *
principalColumn 
:  
$str! %
,% &
onDelete 
: 
ReferentialAction +
.+ ,
Cascade, 3
)3 4
;4 5
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
DropForeignKey +
(+ ,
name 
: 
$str 6
,6 7
table 
: 
$str "
)" #
;# $
migrationBuilder 
. 
AddForeignKey *
(* +
name 
: 
$str 6
,6 7
table 
: 
$str "
," #
column 
: 
$str $
,$ %
principalTable   
:   
$str    )
,  ) *
principalColumn!! 
:!!  
$str!!! %
,!!% &
onDelete"" 
:"" 
ReferentialAction"" +
.""+ ,
Restrict"", 4
)""4 5
;""5 6
}## 	
}$$ 
}%% ¶1
]C:\projects\personal\prestasys\Unisul.PrestaSys.Repositorio\Prestacoes\PrestacaoRepository.cs
	namespace 	
Unisul
 
. 
	PrestaSys 
. 
Repositorio &
.& '

Prestacoes' 1
{ 
public 

	interface  
IPrestacaoRepository )
{		 
int

 
Create

 
(

 
	Prestacao

 
	prestacao

 &
)

& '
;

' (
int 
Delete 
( 
int 
id 
) 
; 
bool 
Exists 
( 
int 
id 
) 
;  
IIncludableQueryable 
< 
	Prestacao &
,& '
PrestacaoTipo( 5
>5 6
GetAll7 =
(= >
)> ?
;? @
	Prestacao 
GetById 
( 
int 
id  
)  !
;! "
int 
Update 
( 
	Prestacao 
	prestacao &
)& '
;' (

IQueryable 
< 
PrestacaoTipo  
>  ! 
GetAllPrestacaoTipos" 6
(6 7
)7 8
;8 9
} 
public 

class 
PrestacaoRepository $
:% & 
IPrestacaoRepository' ;
{ 
private 
readonly 
IPrestaSysDbContext ,
_context- 5
;5 6
public 
PrestacaoRepository "
(" #
IPrestaSysDbContext# 6
context7 >
)> ?
{ 	
_context 
= 
context 
; 
} 	
public 
int 
Create 
( 
	Prestacao #
	prestacao$ -
)- .
{ 	
_context 
. 
Add 
( 
	prestacao "
)" #
;# $
return 
_context 
. 
SaveChanges '
(' (
)( )
;) *
}   	
public"" 
int"" 
Delete"" 
("" 
int"" 
id""  
)""  !
{## 	
var$$ 
	prestacao$$ 
=$$ 
_context$$ $
.$$$ %
	Prestacao$$% .
.$$. /
Find$$/ 3
($$3 4
id$$4 6
)$$6 7
;$$7 8
_context%% 
.%% 
	Prestacao%% 
.%% 
Remove%% %
(%%% &
	prestacao%%& /
)%%/ 0
;%%0 1
return&& 
_context&& 
.&& 
SaveChanges&& '
(&&' (
)&&( )
;&&) *
}'' 	
public)) 
bool)) 
Exists)) 
()) 
int)) 
id)) !
)))! "
{** 	
return++ 
_context++ 
.++ 
	Prestacao++ %
.++% &
Any++& )
(++) *
e++* +
=>++, .
e++/ 0
.++0 1
Id++1 3
==++4 6
id++7 9
)++9 :
;++: ;
},, 	
public..  
IIncludableQueryable.. #
<..# $
	Prestacao..$ -
,..- .
PrestacaoTipo../ <
>..< =
GetAll..> D
(..D E
)..E F
{// 	
return00 
_context00 
.00 
	Prestacao00 %
.00% &
Include00& -
(00- .
pr00. 0
=>001 3
pr004 6
.006 7
	Aprovador007 @
)00@ A
.11 
Include11 
(11 
pr11 
=>11 
pr11 !
.11! "
AprovadorFinanceiro11" 5
)115 6
.22 
Include22 
(22 
pr22 
=>22 
pr22 !
.22! "
Emitente22" *
)22* +
.33 
Include33 
(33 
pr33 
=>33 
pr33 !
.33! "
Status33" (
)33( )
.44 
Include44 
(44 
pr44 
=>44 
pr44 !
.44! "
Tipo44" &
)44& '
;44' (
}55 	
public77 
	Prestacao77 
GetById77  
(77  !
int77! $
id77% '
)77' (
{88 	
return99 
_context99 
.99 
	Prestacao99 %
.:: 
Include:: 
(:: 
p:: 
=>:: 
p:: 
.::  
	Aprovador::  )
)::) *
.;; 
Include;; 
(;; 
p;; 
=>;; 
p;; 
.;;  
AprovadorFinanceiro;;  3
);;3 4
.<< 
Include<< 
(<< 
p<< 
=><< 
p<< 
.<<  
Emitente<<  (
)<<( )
.== 
Include== 
(== 
p== 
=>== 
p== 
.==  
Status==  &
)==& '
.>> 
Include>> 
(>> 
p>> 
=>>> 
p>> 
.>>  
Tipo>>  $
)>>$ %
.?? 
FirstOrDefault?? 
(??  
m??  !
=>??" $
m??% &
.??& '
Id??' )
==??* ,
id??- /
)??/ 0
;??0 1
}@@ 	
publicBB 
intBB 
UpdateBB 
(BB 
	PrestacaoBB #
	prestacaoBB$ -
)BB- .
{CC 	
_contextDD 
.DD 
UpdateDD 
(DD 
	prestacaoDD %
)DD% &
;DD& '
returnEE 
_contextEE 
.EE 
SaveChangesEE '
(EE' (
)EE( )
;EE) *
}FF 	
publicHH 

IQueryableHH 
<HH 
PrestacaoTipoHH '
>HH' ( 
GetAllPrestacaoTiposHH) =
(HH= >
)HH> ?
{II 	
returnJJ 
_contextJJ 
.JJ 
PrestacaoTipoJJ )
;JJ) *
}KK 	
}LL 
}MM ‡ß
QC:\projects\personal\prestasys\Unisul.PrestaSys.Repositorio\PrestaSysDbContext.cs
	namespace 	
Unisul
 
. 
	PrestaSys 
. 
Repositorio &
{ 
public 

class 
PrestaSysDbContext #
:$ %
	DbContext& /
,/ 0
IPrestaSysDbContext1 D
{ 
private 
readonly 
DbContextOptions )
<) *
PrestaSysDbContext* <
>< =
_options> F
;F G
public 
PrestaSysDbContext !
(! "
DbContextOptions" 2
<2 3
PrestaSysDbContext3 E
>E F
optionsG N
)N O
: 
base 
( 
options 
) 
{ 	
_options 
= 
options 
; 
} 	
public 
new 
EntityEntry 
Add "
(" #
object# )
entity* 0
)0 1
{ 	
return 
base 
. 
Add 
( 
entity "
)" #
;# $
} 	
public 
new 
bool 
Equals 
( 
object %
obj& )
)) *
{ 	
return 
base 
. 
Equals 
( 
obj "
)" #
;# $
}   	
public"" 
new"" 
int"" 
GetHashCode"" "
(""" #
)""# $
{## 	
return$$ 
base$$ 
.$$ 
GetHashCode$$ #
($$# $
)$$$ %
;$$% &
}%% 	
public'' 
virtual'' 
DbSet'' 
<'' 
	Prestacao'' &
>''& '
	Prestacao''( 1
{''2 3
get''4 7
;''7 8
set''9 <
;''< =
}''> ?
public(( 
virtual(( 
DbSet(( 
<(( 
PrestacaoStatus(( ,
>((, -
PrestacaoStatus((. =
{((> ?
get((@ C
;((C D
set((E H
;((H I
}((J K
public)) 
virtual)) 
DbSet)) 
<)) 
PrestacaoTipo)) *
>))* +
PrestacaoTipo)), 9
{)): ;
get))< ?
;))? @
set))A D
;))D E
}))F G
public++ 
new++ 
EntityEntry++ 
Remove++ %
<++% &
TEntity++& -
>++- .
(++. /
TEntity++/ 6
entity++7 =
)++= >
where++? D
TEntity++E L
:++M N
class++O T
{,, 	
return-- 
base-- 
.-- 
Remove-- 
(-- 
entity-- %
)--% &
;--& '
}.. 	
public00 
new00 
int00 
SaveChanges00 "
(00" #
)00# $
{11 	
return22 
base22 
.22 
SaveChanges22 #
(22# $
)22$ %
;22% &
}33 	
public55 
new55 
int55 
SaveChanges55 "
(55" #
bool55# '%
acceptAllChangesOnSuccess55( A
)55A B
{66 	
return77 
base77 
.77 
SaveChanges77 #
(77# $%
acceptAllChangesOnSuccess77$ =
)77= >
;77> ?
}88 	
public:: 
new:: 
Task:: 
<:: 
int:: 
>:: 
SaveChangesAsync:: -
(::- .
CancellationToken::. ?
cancellationToken::@ Q
)::Q R
{;; 	
return<< 
base<< 
.<< 
SaveChangesAsync<< (
(<<( )
cancellationToken<<) :
)<<: ;
;<<; <
}== 	
public?? 
new?? 
Task?? 
<?? 
int?? 
>?? 
SaveChangesAsync?? -
(??- .
bool??. 2%
acceptAllChangesOnSuccess??3 L
,??L M
CancellationToken??N _
cancellationToken??` q
)??q r
{@@ 	
returnAA 
baseAA 
.AA 
SaveChangesAsyncAA (
(AA( )%
acceptAllChangesOnSuccessAA) B
,AAB C
cancellationTokenAAD U
)AAU V
;AAV W
}BB 	
publicDD 
TaskDD 
<DD 
intDD 
>DD 
SaveChangesAsyncDD )
(DD) *
)DD* +
{EE 	
returnFF 
baseFF 
.FF 
SaveChangesAsyncFF (
(FF( )
)FF) *
;FF* +
}GG 	
publicII 
newII 
stringII 
ToStringII "
(II" #
)II# $
{JJ 	
returnKK 
baseKK 
.KK 
ToStringKK  
(KK  !
)KK! "
;KK" #
}LL 	
publicNN 
newNN 
EntityEntryNN 
UpdateNN %
(NN% &
objectNN& ,
entityNN- 3
)NN3 4
{OO 	
ifPP 
(PP 
entityPP 
==PP 
nullPP 
)PP 
{QQ 
throwRR 
newRR !
ArgumentNullExceptionRR /
(RR/ 0
nameofRR0 6
(RR6 7
entityRR7 =
)RR= >
)RR> ?
;RR? @
}SS 
tryUU 
{VV 
returnWW 
baseWW 
.WW 
UpdateWW "
(WW" #
entityWW# )
)WW) *
;WW* +
}XX 
catchYY 
(YY %
InvalidOperationExceptionYY ,
)YY, -
{ZZ 
var[[ 
originalEntity[[ "
=[[# $
Find[[% )
([[) *
entity[[* 0
.[[0 1
GetType[[1 8
([[8 9
)[[9 :
,[[: ;
([[< =
([[= >
IEntity[[> E
)[[E F
entity[[F L
)[[L M
.[[M N
Id[[N P
)[[P Q
;[[Q R
Entry\\ 
(\\ 
originalEntity\\ $
)\\$ %
.\\% &
CurrentValues\\& 3
.\\3 4
	SetValues\\4 =
(\\= >
entity\\> D
)\\D E
;\\E F
return]] 
base]] 
.]] 
Update]] "
(]]" #
originalEntity]]# 1
)]]1 2
;]]2 3
}^^ 
}__ 	
publicaa 
virtualaa 
DbSetaa 
<aa 
Usuarioaa $
>aa$ %
Usuarioaa& -
{aa. /
getaa0 3
;aa3 4
setaa5 8
;aa8 9
}aa: ;
	protectedcc 
overridecc 
voidcc 
OnModelCreatingcc  /
(cc/ 0
ModelBuildercc0 <
modelBuildercc= I
)ccI J
{dd 	
modelBuilderee 
.ee 
HasAnnotationee &
(ee& '
$stree' 7
,ee7 8
$stree9 P
)eeP Q
;eeQ R
modelBuildergg 
.gg 
Entitygg 
<gg  
	Prestacaogg  )
>gg) *
(gg* +
entitygg+ 1
=>gg2 4
{hh 
entityii 
.ii 
Propertyii 
(ii  
eii  !
=>ii" $
eii% &
.ii& '
Dataii' +
)ii+ ,
.ii, -
HasColumnTypeii- :
(ii: ;
$strii; E
)iiE F
;iiF G
entitykk 
.kk 
Propertykk 
(kk  
ekk  !
=>kk" $
ekk% &
.kk& '
Justificativakk' 4
)kk4 5
.kk5 6

IsRequiredkk6 @
(kk@ A
)kkA B
;kkB C
entitymm 
.mm 
Propertymm 
(mm  
emm  !
=>mm" $
emm% &
.mm& '
Titulomm' -
)mm- .
.nn 

IsRequirednn 
(nn  
)nn  !
.oo 
HasMaxLengthoo !
(oo! "
$numoo" $
)oo$ %
;oo% &
entityqq 
.qq 
Propertyqq 
(qq  
eqq  !
=>qq" $
eqq% &
.qq& '
Valorqq' ,
)qq, -
.qq- .
HasColumnTypeqq. ;
(qq; <
$strqq< L
)qqL M
;qqM N
entityss 
.ss 
HasOness 
(ss 
dss 
=>ss  "
dss# $
.ss$ %
AprovadorFinanceiross% 8
)ss8 9
.tt 
WithManytt 
(tt 
ptt 
=>tt  "
ptt# $
.tt$ %(
PrestacaoAprovadorFinanceirott% A
)ttA B
.uu 
HasForeignKeyuu "
(uu" #
duu# $
=>uu% '
duu( )
.uu) *!
AprovadorFinanceiroIduu* ?
)uu? @
.vv 
OnDeletevv 
(vv 
DeleteBehaviorvv ,
.vv, -
ClientSetNullvv- :
)vv: ;
.ww 
HasConstraintNameww &
(ww& '
$strww' R
)wwR S
;wwS T
entityyy 
.yy 
HasOneyy 
(yy 
dyy 
=>yy  "
dyy# $
.yy$ %
	Aprovadoryy% .
)yy. /
.zz 
WithManyzz 
(zz 
pzz 
=>zz  "
pzz# $
.zz$ %
PrestacaoAprovadorzz% 7
)zz7 8
.{{ 
HasForeignKey{{ "
({{" #
d{{# $
=>{{% '
d{{( )
.{{) *
AprovadorId{{* 5
){{5 6
.|| 
OnDelete|| 
(|| 
DeleteBehavior|| ,
.||, -
ClientSetNull||- :
)||: ;
.}} 
HasConstraintName}} &
(}}& '
$str}}' H
)}}H I
;}}I J
entity 
. 
HasOne 
( 
d 
=>  "
d# $
.$ %
Emitente% -
)- .
.
ÄÄ 
WithMany
ÄÄ 
(
ÄÄ 
p
ÄÄ 
=>
ÄÄ  "
p
ÄÄ# $
.
ÄÄ$ %
PrestacaoEmitente
ÄÄ% 6
)
ÄÄ6 7
.
ÅÅ 
HasForeignKey
ÅÅ "
(
ÅÅ" #
d
ÅÅ# $
=>
ÅÅ% '
d
ÅÅ( )
.
ÅÅ) *

EmitenteId
ÅÅ* 4
)
ÅÅ4 5
.
ÇÇ 
OnDelete
ÇÇ 
(
ÇÇ 
DeleteBehavior
ÇÇ ,
.
ÇÇ, -
Cascade
ÇÇ- 4
)
ÇÇ4 5
.
ÉÉ 
HasConstraintName
ÉÉ &
(
ÉÉ& '
$str
ÉÉ' G
)
ÉÉG H
;
ÉÉH I
entity
ÖÖ 
.
ÖÖ 
HasOne
ÖÖ 
(
ÖÖ 
d
ÖÖ 
=>
ÖÖ  "
d
ÖÖ# $
.
ÖÖ$ %
Status
ÖÖ% +
)
ÖÖ+ ,
.
ÜÜ 
WithMany
ÜÜ 
(
ÜÜ 
p
ÜÜ 
=>
ÜÜ  "
p
ÜÜ# $
.
ÜÜ$ %
	Prestacao
ÜÜ% .
)
ÜÜ. /
.
áá 
HasForeignKey
áá "
(
áá" #
d
áá# $
=>
áá% '
d
áá( )
.
áá) *
StatusId
áá* 2
)
áá2 3
.
àà 
OnDelete
àà 
(
àà 
DeleteBehavior
àà ,
.
àà, -
ClientSetNull
àà- :
)
àà: ;
.
ââ 
HasConstraintName
ââ &
(
ââ& '
$str
ââ' E
)
ââE F
;
ââF G
entity
ãã 
.
ãã 
HasOne
ãã 
(
ãã 
d
ãã 
=>
ãã  "
d
ãã# $
.
ãã$ %
Tipo
ãã% )
)
ãã) *
.
åå 
WithMany
åå 
(
åå 
p
åå 
=>
åå  "
p
åå# $
.
åå$ %
	Prestacao
åå% .
)
åå. /
.
çç 
HasForeignKey
çç "
(
çç" #
d
çç# $
=>
çç% '
d
çç( )
.
çç) *
TipoId
çç* 0
)
çç0 1
.
éé 
OnDelete
éé 
(
éé 
DeleteBehavior
éé ,
.
éé, -
ClientSetNull
éé- :
)
éé: ;
.
èè 
HasConstraintName
èè &
(
èè& '
$str
èè' C
)
èèC D
;
èèD E
}
êê 
)
êê 
;
êê 
modelBuilder
íí 
.
íí 
Entity
íí 
<
íí  
PrestacaoStatus
íí  /
>
íí/ 0
(
íí0 1
entity
íí1 7
=>
íí8 :
{
ìì 
entity
îî 
.
îî 
Property
îî 
(
îî  
e
îî  !
=>
îî" $
e
îî% &
.
îî& '
Status
îî' -
)
îî- .
.
ïï 

IsRequired
ïï 
(
ïï  
)
ïï  !
.
ññ 
HasMaxLength
ññ !
(
ññ! "
$num
ññ" $
)
ññ$ %
;
ññ% &
}
óó 
)
óó 
;
óó 
modelBuilder
ôô 
.
ôô 
Entity
ôô 
<
ôô  
PrestacaoStatus
ôô  /
>
ôô/ 0
(
ôô0 1
)
ôô1 2
.
ôô2 3
HasData
ôô3 :
(
ôô: ;
new
öö 
PrestacaoStatus
öö #
{
õõ 
Id
úú 
=
úú 
$num
úú 
,
úú 
Status
ùù 
=
ùù 
$str
ùù 7
}
ûû 
,
ûû 
new
üü 
PrestacaoStatus
üü #
{
†† 
Id
°° 
=
°° 
$num
°° 
,
°° 
Status
¢¢ 
=
¢¢ 
$str
¢¢ 6
}
££ 
,
££ 
new
§§ 
PrestacaoStatus
§§ #
{
•• 
Id
¶¶ 
=
¶¶ 
$num
¶¶ 
,
¶¶ 
Status
ßß 
=
ßß 
$str
ßß )
}
®® 
,
®® 
new
©© 
PrestacaoStatus
©© #
{
™™ 
Id
´´ 
=
´´ 
$num
´´ 
,
´´ 
Status
¨¨ 
=
¨¨ 
$str
¨¨ (
}
≠≠ 
)
ÆÆ 
;
ÆÆ 
modelBuilder
∞∞ 
.
∞∞ 
Entity
∞∞ 
<
∞∞  
PrestacaoTipo
∞∞  -
>
∞∞- .
(
∞∞. /
entity
∞∞/ 5
=>
∞∞6 8
{
±± 
entity
≤≤ 
.
≤≤ 
Property
≤≤ 
(
≤≤  
e
≤≤  !
=>
≤≤" $
e
≤≤% &
.
≤≤& '
Tipo
≤≤' +
)
≤≤+ ,
.
≥≥ 

IsRequired
≥≥ 
(
≥≥  
)
≥≥  !
.
¥¥ 
HasMaxLength
¥¥ !
(
¥¥! "
$num
¥¥" $
)
¥¥$ %
;
¥¥% &
}
µµ 
)
µµ 
;
µµ 
modelBuilder
∑∑ 
.
∑∑ 
Entity
∑∑ 
<
∑∑  
PrestacaoTipo
∑∑  -
>
∑∑- .
(
∑∑. /
)
∑∑/ 0
.
∑∑0 1
HasData
∑∑1 8
(
∑∑8 9
new
∏∏ 
PrestacaoTipo
∏∏ !
{
ππ 
Id
∫∫ 
=
∫∫ 
$num
∫∫ 
,
∫∫ 
Tipo
ªª 
=
ªª 
$str
ªª #
}
ºº 
,
ºº 
new
ΩΩ 
PrestacaoTipo
ΩΩ !
{
ææ 
Id
øø 
=
øø 
$num
øø 
,
øø 
Tipo
¿¿ 
=
¿¿ 
$str
¿¿ ,
}
¡¡ 
,
¡¡ 
new
¬¬ 
PrestacaoTipo
¬¬ !
{
√√ 
Id
ƒƒ 
=
ƒƒ 
$num
ƒƒ 
,
ƒƒ 
Tipo
≈≈ 
=
≈≈ 
$str
≈≈ (
}
∆∆ 
,
∆∆ 
new
«« 
PrestacaoTipo
«« !
{
»» 
Id
…… 
=
…… 
$num
…… 
,
…… 
Tipo
   
=
   
$str
   &
}
ÀÀ 
)
ÃÃ 
;
ÃÃ 
modelBuilder
ŒŒ 
.
ŒŒ 
Entity
ŒŒ 
<
ŒŒ  
Usuario
ŒŒ  '
>
ŒŒ' (
(
ŒŒ( )
entity
ŒŒ) /
=>
ŒŒ0 2
{
œœ 
entity
–– 
.
–– 
HasIndex
–– 
(
––  
e
––  !
=>
––" $
e
––% &
.
––& '
Email
––' ,
)
––, -
.
—— 
HasName
—— 
(
—— 
$str
—— -
)
——- .
.
““ 
IsUnique
““ 
(
““ 
)
““ 
;
““  
entity
‘‘ 
.
‘‘ 
Property
‘‘ 
(
‘‘  
e
‘‘  !
=>
‘‘" $
e
‘‘% &
.
‘‘& '
Email
‘‘' ,
)
‘‘, -
.
’’ 

IsRequired
’’ 
(
’’  
)
’’  !
.
÷÷ 
HasMaxLength
÷÷ !
(
÷÷! "
$num
÷÷" $
)
÷÷$ %
;
÷÷% &
entity
ÿÿ 
.
ÿÿ 
Property
ÿÿ 
(
ÿÿ  
e
ÿÿ  !
=>
ÿÿ" $
e
ÿÿ% &
.
ÿÿ& '
Nome
ÿÿ' +
)
ÿÿ+ ,
.
ŸŸ 

IsRequired
ŸŸ 
(
ŸŸ  
)
ŸŸ  !
.
⁄⁄ 
HasMaxLength
⁄⁄ !
(
⁄⁄! "
$num
⁄⁄" $
)
⁄⁄$ %
;
⁄⁄% &
entity
‹‹ 
.
‹‹ 
Property
‹‹ 
(
‹‹  
e
‹‹  !
=>
‹‹" $
e
‹‹% &
.
‹‹& '
Senha
‹‹' ,
)
‹‹, -
.
›› 

IsRequired
›› 
(
››  
)
››  !
.
ﬁﬁ 
HasMaxLength
ﬁﬁ !
(
ﬁﬁ! "
$num
ﬁﬁ" $
)
ﬁﬁ$ %
;
ﬁﬁ% &
entity
‡‡ 
.
‡‡ 
Property
‡‡ 
(
‡‡  
e
‡‡  !
=>
‡‡" $
e
‡‡% &
.
‡‡& '
	Sobrenome
‡‡' 0
)
‡‡0 1
.
·· 

IsRequired
·· 
(
··  
)
··  !
.
‚‚ 
HasMaxLength
‚‚ !
(
‚‚! "
$num
‚‚" $
)
‚‚$ %
;
‚‚% &
entity
‰‰ 
.
‰‰ 
HasOne
‰‰ 
(
‰‰ 
d
‰‰ 
=>
‰‰  "
d
‰‰# $
.
‰‰$ %
GerenteFinanceiro
‰‰% 6
)
‰‰6 7
.
ÂÂ 
WithMany
ÂÂ 
(
ÂÂ 
p
ÂÂ 
=>
ÂÂ  "
p
ÂÂ# $
.
ÂÂ$ %&
InverseGerenteFinanceiro
ÂÂ% =
)
ÂÂ= >
.
ÊÊ 
HasForeignKey
ÊÊ "
(
ÊÊ" #
d
ÊÊ# $
=>
ÊÊ% '
d
ÊÊ( )
.
ÊÊ) *!
GerenteFinanceiroId
ÊÊ* =
)
ÊÊ= >
.
ÁÁ 
HasConstraintName
ÁÁ &
(
ÁÁ& '
$str
ÁÁ' J
)
ÁÁJ K
;
ÁÁK L
entity
ÈÈ 
.
ÈÈ 
HasOne
ÈÈ 
(
ÈÈ 
d
ÈÈ 
=>
ÈÈ  "
d
ÈÈ# $
.
ÈÈ$ %
Gerente
ÈÈ% ,
)
ÈÈ, -
.
ÍÍ 
WithMany
ÍÍ 
(
ÍÍ 
p
ÍÍ 
=>
ÍÍ  "
p
ÍÍ# $
.
ÍÍ$ %
InverseGerente
ÍÍ% 3
)
ÍÍ3 4
.
ÎÎ 
HasForeignKey
ÎÎ "
(
ÎÎ" #
d
ÎÎ# $
=>
ÎÎ% '
d
ÎÎ( )
.
ÎÎ) *
	GerenteId
ÎÎ* 3
)
ÎÎ3 4
.
ÏÏ 
HasConstraintName
ÏÏ &
(
ÏÏ& '
$str
ÏÏ' @
)
ÏÏ@ A
;
ÏÏA B
}
ÌÌ 
)
ÌÌ 
;
ÌÌ 
modelBuilder
ÔÔ 
.
ÔÔ 
Entity
ÔÔ 
<
ÔÔ  
Usuario
ÔÔ  '
>
ÔÔ' (
(
ÔÔ( )
)
ÔÔ) *
.
ÔÔ* +
HasData
ÔÔ+ 2
(
ÔÔ2 3
new
 
Usuario
 
{
ÒÒ 
Id
ÚÚ 
=
ÚÚ 
$num
ÚÚ 
,
ÚÚ 
Nome
ÛÛ 
=
ÛÛ 
$str
ÛÛ %
,
ÛÛ% &
	Sobrenome
ÙÙ 
=
ÙÙ 
$str
ÙÙ  +
,
ÙÙ+ ,
Email
ıı 
=
ıı 
$str
ıı :
,
ıı: ;
Senha
ˆˆ 
=
ˆˆ 
$str
ˆˆ "
,
ˆˆ" #
	GerenteId
˜˜ 
=
˜˜ 
$num
˜˜  !
,
˜˜! "!
GerenteFinanceiroId
¯¯ '
=
¯¯( )
$num
¯¯* +
,
¯¯+ ,#
FlagGerenteFinanceiro
˘˘ )
=
˘˘* +
true
˘˘, 0
,
˘˘0 1
FlagGerente
˙˙ 
=
˙˙  !
true
˙˙" &
}
˚˚ 
)
˚˚ 
;
˚˚ 
}
¸¸ 	
public
˛˛ 
void
˛˛ 

BulkUpdate
˛˛ 
<
˛˛ 
T
˛˛  
>
˛˛  !
(
˛˛! "
IList
˛˛" '
<
˛˛' (
T
˛˛( )
>
˛˛) *
entities
˛˛+ 3
,
˛˛3 4

BulkConfig
˛˛5 ?

bulkConfig
˛˛@ J
=
˛˛K L
null
˛˛M Q
,
˛˛Q R
Action
˛˛S Y
<
˛˛Y Z
decimal
˛˛Z a
>
˛˛a b
progress
˛˛c k
=
˛˛l m
null
˛˛n r
)
˛˛r s
where
˛˛t y
T
˛˛z {
:
˛˛| }
class˛˛~ É
{
ˇˇ 	
this
ÄÄ 
.
ÄÄ  
BulkInsertOrUpdate
ÄÄ #
(
ÄÄ# $
entities
ÄÄ$ ,
,
ÄÄ, -

bulkConfig
ÄÄ. 8
,
ÄÄ8 9
progress
ÄÄ: B
)
ÄÄB C
;
ÄÄC D
}
ÅÅ 	
}
ÇÇ 
}ÉÉ å4
YC:\projects\personal\prestasys\Unisul.PrestaSys.Repositorio\Usuarios\UsuarioRepository.cs
	namespace 	
Unisul
 
. 
	PrestaSys 
. 
Repositorio &
.& '
Usuarios' /
{		 
public

 

	interface

 
IUsuarioRepository

 '
{ 
int 
Create 
( 
Usuario 
usuario "
)" #
;# $
int 
Delete 
( 
int 
id 
) 
; 
bool 
Exists 
( 
int 
id 
) 
;  
IIncludableQueryable 
< 
Usuario $
,$ %
ICollection& 1
<1 2
	Prestacao2 ;
>; <
>< =
GetAll> D
(D E
)E F
;F G
Usuario 
GetById 
( 
int 
id 
) 
;  
void 
Update 
( 
Usuario 
usuario #
)# $
;$ %
} 
public 

class 
UsuarioRepository "
:# $
IUsuarioRepository% 7
{ 
private 
readonly 
IPrestaSysDbContext ,
_context- 5
;5 6
public 
UsuarioRepository  
(  !
IPrestaSysDbContext! 4
context5 <
)< =
{ 	
_context 
= 
context 
; 
} 	
public 
int 
Create 
( 
Usuario !
usuario" )
)) *
{ 	
_context 
. 
Add 
( 
usuario  
)  !
;! "
return   
_context   
.   
SaveChanges   '
(  ' (
)  ( )
;  ) *
}!! 	
public## 
int## 
Delete## 
(## 
int## 
id##  
)##  !
{$$ 	
var%% 
usuario%% 
=%% 
_context%% "
.%%" #
Usuario%%# *
.%%* +
Find%%+ /
(%%/ 0
id%%0 2
)%%2 3
;%%3 4
_context&& 
.&& 
Usuario&& 
.&& 
Remove&& #
(&&# $
usuario&&$ +
)&&+ ,
;&&, -
return'' 
_context'' 
.'' 
SaveChanges'' '
(''' (
)''( )
;'') *
}(( 	
public** 
bool** 
Exists** 
(** 
int** 
id** !
)**! "
{++ 	
return,, 
_context,, 
.,, 
Usuario,, #
.,,# $
Any,,$ '
(,,' (
e,,( )
=>,,* ,
e,,- .
.,,. /
Id,,/ 1
==,,2 4
id,,5 7
),,7 8
;,,8 9
}-- 	
public//  
IIncludableQueryable// #
<//# $
Usuario//$ +
,//+ ,
ICollection//- 8
<//8 9
	Prestacao//9 B
>//B C
>//C D
GetAll//E K
(//K L
)//L M
{00 	
return11 
_context11 
.11 
Usuario11 #
.22 
Include22 
(22 
u22 
=>22 
u22 
.22  
Gerente22  '
)22' (
.33 
Include33 
(33 
u33 
=>33 
u33 
.33  
GerenteFinanceiro33  1
)331 2
.44 
Include44 
(44 
p44 
=>44 
p44 
.44  
PrestacaoAprovador44  2
)442 3
.55 
Include55 
(55 
p55 
=>55 
p55 
.55  (
PrestacaoAprovadorFinanceiro55  <
)55< =
;55= >
}66 	
public88 
Usuario88 
GetById88 
(88 
int88 "
id88# %
)88% &
{99 	
return:: 
_context:: 
.:: 
Usuario:: #
.;; 
Include;; 
(;; 
u;; 
=>;; 
u;; 
.;;  
Gerente;;  '
);;' (
.<< 
Include<< 
(<< 
u<< 
=><< 
u<< 
.<<  
GerenteFinanceiro<<  1
)<<1 2
.== 
Include== 
(== 
p== 
=>== 
p== 
.==  
PrestacaoAprovador==  2
)==2 3
.>> 
Include>> 
(>> 
p>> 
=>>> 
p>> 
.>>  (
PrestacaoAprovadorFinanceiro>>  <
)>>< =
.?? 
FirstOrDefault?? 
(??  
m??  !
=>??" $
m??% &
.??& '
Id??' )
==??* ,
id??- /
)??/ 0
;??0 1
}@@ 	
publicBB 
voidBB 
UpdateBB 
(BB 
UsuarioBB "
usuarioBB# *
)BB* +
{CC 	
varDD 

prestacoesDD 
=DD 
_contextDD %
.DD% &
	PrestacaoDD& /
.DD/ 0
WhereDD0 5
(DD5 6
pDD6 7
=>DD8 :
pDD; <
.DD< =

EmitenteIdDD= G
==DDH J
usuarioDDK R
.DDR S
IdDDS U
)DDU V
;DDV W
foreachFF 
(FF 
varFF 
	prestacaoFF "
inFF# %

prestacoesFF& 0
)FF0 1
{GG 
	prestacaoHH 
.HH 
AprovadorIdHH %
=HH& '
usuarioHH( /
.HH/ 0
	GerenteIdHH0 9
;HH9 :
	prestacaoII 
.II !
AprovadorFinanceiroIdII /
=II0 1
usuarioII2 9
.II9 :
GerenteFinanceiroIdII: M
;IIM N
}JJ 
_contextLL 
.LL 

BulkUpdateLL 
(LL  

prestacoesLL  *
.LL* +
ToListLL+ 1
(LL1 2
)LL2 3
)LL3 4
;LL4 5
_contextNN 
.NN 
UpdateNN 
(NN 
usuarioNN #
)NN# $
;NN$ %
_contextOO 
.OO 
SaveChangesOO  
(OO  !
)OO! "
;OO" #
}PP 	
}QQ 
}RR 